<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="John Engelman - @johnrengelman">
<title>Shadow Plugin User Guide &amp; Examples</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Shadow Plugin User Guide &amp; Examples</h1>
<div class="details">
<span id="author" class="author">John Engelman - @johnrengelman</span><br>
<span id="revnumber">version 2.0.4</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#benefits_of_shadow">1.1. Benefits of Shadow</a></li>
<li><a href="#getting_started">1.2. Getting Started</a></li>
<li><a href="#default_java_groovy_tasks">1.3. Default Java/Groovy Tasks</a></li>
<li><a href="#shadowing_gradle_plugins">1.4. Shadowing Gradle Plugins</a></li>
</ul>
</li>
<li><a href="#configuring_shadow">2. Configuring Shadow</a>
<ul class="sectlevel2">
<li><a href="#configuring_output_name">2.1. Configuring Output Name</a></li>
<li><a href="#configuring_the_runtime_classpath">2.2. Configuring the Runtime Classpath</a></li>
<li><a href="#configuring_the_jar_manifest">2.3. Configuring the JAR Manifest</a></li>
<li><a href="#filtering_shadow_jar_contents">2.4. Filtering Shadow Jar Contents</a></li>
<li><a href="#configuring_shadowed_dependencies">2.5. Configuring Shadowed Dependencies</a></li>
<li><a href="#embedding_jar_files_inside_your_shadow_jar">2.6. Embedding Jar Files Inside Your Shadow Jar</a></li>
<li><a href="#filtering_dependencies">2.7. Filtering Dependencies</a></li>
<li><a href="#controlling_jar_content_merging">2.8. Controlling JAR Content Merging</a></li>
<li><a href="#relocating_packages">2.9. Relocating Packages</a></li>
</ul>
</li>
<li><a href="#creating_a_custom_shadowjar_task">3. Creating a Custom ShadowJar Task</a></li>
<li><a href="#integrating_with_application_plugin">4. Integrating with Application Plugin</a>
<ul class="sectlevel2">
<li><a href="#running_the_shadow_jar">4.1. Running the Shadow JAR</a></li>
<li><a href="#distributing_the_shadow_jar">4.2. Distributing the Shadow JAR</a></li>
</ul>
</li>
<li><a href="#publishing_shadow_jars">5. Publishing Shadow JARs</a>
<ul class="sectlevel2">
<li><a href="#publishing_with_maven_publish_plugin">5.1. Publishing with Maven-Publish Plugin</a></li>
<li><a href="#publishing_with_maven_plugin">5.2. Publishing with Maven Plugin</a></li>
<li><a href="#shadow_configuration_and_publishing">5.3. Shadow Configuration and Publishing</a></li>
</ul>
</li>
<li><a href="#using_shadow_in_multi_project_builds">6. Using Shadow in Multi-Project Builds</a>
<ul class="sectlevel2">
<li><a href="#depending_on_the_shadow_jar_from_another_project">6.1. Depending on the Shadow Jar from Another Project</a></li>
</ul>
</li>
<li><a href="#using_shadow_to_package_gradle_plugins">7. Using Shadow to Package Gradle Plugins</a></li>
<li><a href="#change_log">8. Change Log</a></li>
<li><a href="#about_this_project">9. About This Project</a>
<ul class="sectlevel2">
<li><a href="#maintainers">9.1. Maintainers</a></li>
<li><a href="#contributors">9.2. Contributors</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="api/index.html">API Docs</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Shadow is a Gradle plugin for combining dependency classes and resources with a project&#8217;s into a single
output Jar.
The combined Jar is often referred to a <em>fat-jar</em> or <em>uber-jar</em>.
Shadow utilizes <code>JarInputStream</code> and <code>JarOutputStream</code> to efficiently process dependent libraries
into the output jar without incurring the I/O overhead of expanding the jars to disk.</p>
</div>
<div class="sect2">
<h3 id="benefits_of_shadow">1.1. Benefits of Shadow</h3>
<div class="paragraph">
<p>Shadowing a project output has 2 major use cases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creating an <em>executable</em> JAR distribution</p>
</li>
<li>
<p>Bundling and relocating common dependencies in libraries to avoid classpath conflicts</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="executable_distributions">1.1.1. Executable Distributions</h4>
<div class="paragraph">
<p>Executable distribution is the main use case for <em>application</em> developers.
The goal of an executable distribution is a single file that can be deployed and executed/run in the runtime
environment.
In the case of Shadow, this is a single <em>uber</em> or <em>fat</em> JAR.
The JAR file contains all the application code and dependent libraries to execute (not including the standard JVM
libraries).
The shadow JAR does <strong>not</strong> include the JRE itself.
It must be available on the target system.</p>
</div>
<div class="paragraph">
<p>Executable JARs contain a JAR MANIFEST that specifies the application Main Class.
This allows the application to be started with a single command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar application-shadow.jar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="library_bundling">1.1.2. Library Bundling</h4>
<div class="paragraph">
<p>Dependency bundling and relocation is the main use case for <em>library</em> authors.
The goal of a bundled library is to create a pre-packaged dependency for other libraries or applications to utilize.
Often in these scenarios, a library may contain a dependency that a downstream library or application also uses.
In <em>some</em> cases, different versions of this common dependency can cause an issue in either the upstream library or
the downstream application.
These issues often manifest themselves as binary incompatibilities in either the library or application code.</p>
</div>
<div class="paragraph">
<p>By utilizing Shadow&#8217;s ability to <em>relocate</em> the package names for dependencies, a library author can ensure that the
library&#8217;s dependencies will not conflict with the same dependency being declared by the downstream application.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting_started">1.2. Getting Started</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath <span class="string"><span class="delimiter">'</span><span class="content">com.github.jengelman.gradle.plugins:shadow:2.0.4</span><span class="delimiter">'</span></span>
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.shadow</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, the Gradle Plugin syntax can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.shadow</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.0.4</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Shadow is a reactive plugin.
This means that applying Shadow by itself will perform no configuration on your project.
Instead, Shadow <em>reacts</em> to the application of other plugins to decorate the project.</p>
</div>
<div class="paragraph">
<p>This means, that for most users, the <code>java</code> or <code>groovy</code> plugins must be <em>explicitly</em> applied
to have the desired effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="default_java_groovy_tasks">1.3. Default Java/Groovy Tasks</h3>
<div class="paragraph">
<p>In the presence of the <code>java</code> or <code>groovy</code> plugins, Shadow will automatically configure the
following behavior:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adds a <code>shadowJar</code> task to the project.</p>
</li>
<li>
<p>Adds a <code>shadow</code> configuration to the project.</p>
</li>
<li>
<p>Configures the <code>shadowJar</code> task to include all sources from the project&#8217;s <code>main</code> sourceSet.</p>
</li>
<li>
<p>Configures the <code>shadowJar</code> task to bundle all dependencies from the <code>runtime</code> configuration.</p>
</li>
<li>
<p>Configures the <em>classifier</em> attribute of the <code>shadowJar</code> task to be <code>'all'</code> .</p>
</li>
<li>
<p>Configures the <code>shadowJar</code> task to generate a <code>Manifest</code> with:</p>
<div class="ulist">
<ul>
<li>
<p>Inheriting all configuration from the standard <code>jar</code> task.</p>
</li>
<li>
<p>Adds a <code>Class-Path</code> attribute to the <code>Manifest</code> that appends all dependencies from the <code>shadow</code> configuration</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configures the <code>shadowJar</code> task to <em>exclude</em> any JAR index or cryptographic signature files matching the following patterns:</p>
<div class="ulist">
<ul>
<li>
<p><code>META-INF/INDEX.LIST</code></p>
</li>
<li>
<p><code>META-INF/*.SF</code></p>
</li>
<li>
<p><code>META-INF/*.DSA</code></p>
</li>
<li>
<p><code>META-INF/*.RSA</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Creates and registers the <code>shadow</code> component in the project (used for integrating with <code>maven-publish</code>).</p>
</li>
<li>
<p>Configures the <code>uploadShadow</code> task (as part of the <code>maven</code> plugin) with the following behavior:</p>
<div class="ulist">
<ul>
<li>
<p>Removes the <code>compile</code> and <code>runtime</code> configurations from the <code>pom.xml</code> file mapping.</p>
</li>
<li>
<p>Adds the <code>shadow</code> configuration to the <code>pom.xml</code> file as <code>RUNTIME</code> scope.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="shadowing_gradle_plugins">1.4. Shadowing Gradle Plugins</h3>
<div class="paragraph">
<p>Starting with v2.0.0, Shadow is capable of automatically configuring package relocation for your dependencies.
This is useful especially when building Gradle plugins where you want your dependencies to not conflict with versions
provided by the Gradle runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath <span class="string"><span class="delimiter">'</span><span class="content">com.github.jengelman.gradle.plugins:shadow:2.0.4</span><span class="delimiter">'</span></span>
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.plugin-shadow</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, the Gradle Plugin syntax can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.plugin-shadow</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.0.4</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Applying the <code>plugin-shadow</code> plugin is the same as applying the standard <code>shadow</code> plugin with the additional creation
of the <code>configureRelocationShadowJar</code> task.
This task runs before the <code>shadowJar</code> task and scans the packages present in the dependencies that will be merged into
the final jar and automatically configures relocation for them.
By default the tasks relocates all packages to the <code>shadow.</code> prefix. For example <code>org.jdom2.JDOMException</code> becomes
<code>shadow.org.jdom2.JDOMException</code></p>
</div>
<div class="paragraph">
<p>For more details see the sectinon <a href="#using_shadow_to_package_gradle_plugins">Using Shadow to Package Gradle Plugins</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring_shadow">2. Configuring Shadow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task type extends from Gradle&#8217;s
<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html"><code>Jar</code></a> type.
This means that all attributes and methods available on <code>Jar</code> are also available on
<a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a>.
Refer the <em>Gradle User Guide</em> for <a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html">Jar</a> for
details.</p>
</div>
<div class="sect2">
<h3 id="configuring_output_name">2.1. Configuring Output Name</h3>
<div class="paragraph">
<p>Shadow configures the default <code>shadowJar</code> task to set the output JAR&#8217;s <code>destinationDir</code>, <code>baseName</code>, <code>appendix</code>,
<code>version</code>, and <code>extension</code> to the same default values as Gradle does for all <code>Jar</code> tasks.
Additionally, it configures the <code>classifier</code> to be <code>all</code>.</p>
</div>
<div class="paragraph">
<p>If working with a Gradle project with the name <code>myApp</code> and version <code>1.0</code>, the default <code>shadowJar</code> task will output a
file at: <code>build/libs/myApp-1.0-all.jar</code></p>
</div>
<div class="paragraph">
<p>As with all <code>Jar</code> tasks in Gradle, these values can be overridden:</p>
</div>
<div class="listingblock">
<div class="title">Output to <code>build/libs/shadow.jar</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
   baseName = <span class="string"><span class="delimiter">'</span><span class="content">shadow</span><span class="delimiter">'</span></span>
   classifier = <span class="predefined-constant">null</span>
   version = <span class="predefined-constant">null</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring_the_runtime_classpath">2.2. Configuring the Runtime Classpath</h3>
<div class="paragraph">
<p>Each Java JAR file contains a manifest file that provides meta data about the contents of the JAR file itself.
When using a shadowed JAR file as an executable JAR, it is assumed that all necessary runtime classes are contained
within the JAR itself.
There may be situations where the desire is to <strong>not</strong> bundle select dependencies into the shadowed JAR file but
they are still required for runtime execution.</p>
</div>
<div class="paragraph">
<p>In these scenarios, Shadow creates a <code>shadow</code> configuration to declare these dependencies.
Dependencies added to the <code>shadow</code> configuration are <strong>not</strong> bundled into the output JAR.
Think of <code>configurations.shadow</code> as unmerged, runtime dependencies.
The integration with the <code>maven</code> and <code>maven-publish</code> plugins will automatically configure dependencies added
to <code>configurations.shadow</code> as <code>RUNTIME</code> scope dependencies in the resulting POM file.</p>
</div>
<div class="paragraph">
<p>Additionally, Shadow automatically configures the manifest of the <code>shadowJar</code> task to contain a <code>Class-Path</code> entry
in the JAR manifest.
The value of the <code>Class-Path</code> entry is the name of all dependencies resolved in the <code>shadow</code> configuration
for the project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
  shadow <span class="string"><span class="delimiter">'</span><span class="content">junit:junit:3.8.2</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inspecting the <code>META-INF/MANIFEST.MF</code> entry in the JAR file will reveal the following attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="property">Class-Path: junit-3.8.2.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>When deploying a shadowed JAR as an execution JAR, it is important to note that any non-bundled runtime dependencies
<strong>must</strong> be deployed in the location specified in the <code>Class-Path</code> entry in the manifest.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring_the_jar_manifest">2.3. Configuring the JAR Manifest</h3>
<div class="paragraph">
<p>Beyond the automatic configuration of the <code>Class-Path</code> entry, the <code>shadowJar</code> manifest is configured in a number of ways.
First, the manifest for the <code>shadowJar</code> task is configured to <em>inherit</em> from the manifest of the standard <code>jar</code> task.
This means that any configuration performed on the <code>jar</code> task will propagate to the <code>shadowJar</code> tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">jar {
   manifest {
       attributes <span class="string"><span class="delimiter">'</span><span class="content">Class-Path</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">/libs/a.jar</span><span class="delimiter">'</span></span>
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inspecting the <code>META-INF/MANIFEST.MF</code> entry in the JAR file will revel the following attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="property">Class-Path: /libs/a.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>If it is desired to inherit a manifest from a JAR task other than the standard <code>jar</code> task, the <code>inheritFrom</code> methods
on the <code>shadowJar.manifest</code> object can be used to configure the upstream.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">task testJar(<span class="key">type</span>: Jar) {
  manifest {
    attributes <span class="string"><span class="delimiter">'</span><span class="content">Description</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">This is an application JAR</span><span class="delimiter">'</span></span>
  }
}

shadowJar {
  manifest {
    inheritFrom project.tasks.testJar.manifest
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="filtering_shadow_jar_contents">2.4. Filtering Shadow Jar Contents</h3>
<div class="paragraph">
<p>The final contents of a shadow JAR can be filtered using the <code>exclude</code> and <code>include</code> methods inherited from Gradle&#8217;s
<code>Jar</code> task type.</p>
</div>
<div class="paragraph">
<p>Refer to the <a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html">Jar</a> documentation for details
on the various versions of the methods and their behavior.</p>
</div>
<div class="paragraph">
<p>When using <code>exclude</code>/<code>include</code> with a <code>ShadowJar</code> task, the resulting copy specs are applied to the <em>final</em> JAR
contents.
This means that, the configuration is applied to the individual files from both the project source set or <em>any</em>
of the dependencies to be merged.</p>
</div>
<div class="listingblock">
<div class="title">Exclude a file from Shadow Jar</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
   exclude <span class="string"><span class="delimiter">'</span><span class="content">a2.properties</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Excludes and includes can be combined just like a normal <code>Jar</code> task, with <code>excludes</code> taking precendence over <code>includes</code>.
Additionally, ANT style patterns can be used to match multiple files.</p>
</div>
<div class="listingblock">
<div class="title">Configuring output using ANT patterns</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
   include <span class="string"><span class="delimiter">'</span><span class="content">*.jar</span><span class="delimiter">'</span></span>
   include <span class="string"><span class="delimiter">'</span><span class="content">*.properties</span><span class="delimiter">'</span></span>
   exclude <span class="string"><span class="delimiter">'</span><span class="content">a2.properties</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring_shadowed_dependencies">2.5. Configuring Shadowed Dependencies</h3>
<div class="paragraph">
<p>Shadow configures the default <code>shadowJar</code> task to merge all dependencies from the project&#8217;s <code>runtime</code> configuration
into the final JAR.
The configurations to from which to source dependencies for the merging can be configured using the <code>configurations</code> property
of the <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  configurations = [project.configurations.compile]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code sample would configure the <code>shadowJar</code> task to merge depdencies from only the <code>compile</code> configuration.
This means any dependency declared in the <code>runtime</code> configuration would be <strong>not</strong> be included in the final JAR.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note the literal use of <code>project.configurations</code> when setting the <code>configurations</code> attribute of a
<a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task.
This is <strong>required</strong>. It maybe be tempting to specify <code>configurations = [configurations.compile]</code> but this will not
have the intended effect, as <code>configurations.compile</code> will try to delegate to the <code>configurations</code> property of the
the <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task instead of the <code>project</code></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="embedding_jar_files_inside_your_shadow_jar">2.6. Embedding Jar Files Inside Your Shadow Jar</h3>
<div class="paragraph">
<p>Because of the way that Gradle handles dependency configuration, from a plugin perspective, shadow is unable to distinguish between a jar file configured as a dependency and a jar file included in the resource folder.  This means that any jar found in a resource directory will be merged into the shadow jar the same as any other dependency.  If your intention is to embed the jar inside, you must rename the jar as to not end with <code>.jar</code> before the shadow task begins.</p>
</div>
</div>
<div class="sect2">
<h3 id="filtering_dependencies">2.7. Filtering Dependencies</h3>
<div class="paragraph">
<p>Individual dependencies can be filtered from the final JAR by using the <code>dependencies</code> block of a
<a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task.
Dependency filtering does <strong>not</strong> apply to transitive dependencies.
That is, excluding a dependency does not exclude any of its dependencies from the final JAR.</p>
</div>
<div class="paragraph">
<p>The <code>dependency</code> blocks provides a number of methods for resolving dependencies using the notations familiar from
Gradle&#8217;s <code>configurations</code> block.</p>
</div>
<div class="listingblock">
<div class="title">Exclude an Module Dependency</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
   compile <span class="string"><span class="delimiter">'</span><span class="content">shadow:d:1.0</span><span class="delimiter">'</span></span>
}

shadowJar {
   dependencies {
      exclude(dependency(<span class="string"><span class="delimiter">'</span><span class="content">shadow:d:1.0</span><span class="delimiter">'</span></span>))
   }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Exclude a Project Dependency</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
  compile project(<span class="string"><span class="delimiter">'</span><span class="content">:client</span><span class="delimiter">'</span></span>)
}

shadowJar {
   dependencies {
       exclude(project(<span class="string"><span class="delimiter">'</span><span class="content">:client</span><span class="delimiter">'</span></span>))
   }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While not being able to filter entire transitive dependency graphs might seem like an oversight, it is necessary
because it would not be possible to intelligently determine the build author&#8217;s intended results when there is a
common dependency between two 1st level dependencies when one is excluded and the other is not.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="using_regex_patterns_to_filter_dependencies">2.7.1. Using Regex Patterns to Filter Dependencies</h4>
<div class="paragraph">
<p>Dependencies can be filtered using regex patterns.
Coupled with the <code>&lt;group&gt;:&lt;artifact&gt;:&lt;version&gt;</code> notation for dependencies, this allows for excluding/including
using any of these individual fields.</p>
</div>
<div class="listingblock">
<div class="title">Exclude Any Version of a Dependency</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
   compile <span class="string"><span class="delimiter">'</span><span class="content">shadow:d:1.0</span><span class="delimiter">'</span></span>
}

shadowJar {
   dependencies {
      exclude(dependency(<span class="string"><span class="delimiter">'</span><span class="content">shadow:d:.*</span><span class="delimiter">'</span></span>))
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any of the individual fields can be safely absent and will function as though a wildcard was specified.</p>
</div>
<div class="listingblock">
<div class="title">Ignore Dependency Version</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  dependencies {
    exclude(dependency(<span class="string"><span class="delimiter">'</span><span class="content">shadow:d</span><span class="delimiter">'</span></span>))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code snippet is functionally equivalent to the previous example.</p>
</div>
<div class="paragraph">
<p>This same patten can be used for any of the dependency notation fields.</p>
</div>
<div class="listingblock">
<div class="title">Ignoring An Artifact Regardless of Group</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  dependencies {
    exclude(dependency(<span class="string"><span class="delimiter">'</span><span class="content">:d:1.0</span><span class="delimiter">'</span></span>))
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Excluding All Artifacts From Group</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  dependencies {
    exclude(dependency(<span class="string"><span class="delimiter">'</span><span class="content">shadow::1.0</span><span class="delimiter">'</span></span>))
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="programmatically_selecting_dependencies_to_filter">2.7.2. Programmatically Selecting Dependencies to Filter</h4>
<div class="paragraph">
<p>If more complex decisions are needed to select the dependencies to be included, the
<a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html#dependencies(Action&lt;DependencyFilter&gt;)"><code>dependencies</code></a> block provides a
method that accepts a <code>Closure</code> for selecting dependencies.</p>
</div>
<div class="listingblock">
<div class="title">Selecting Dependencies to Filter With a Spec</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
   dependencies {
       exclude(dependency {
           <span class="local-variable">it</span>.moduleGroup == <span class="string"><span class="delimiter">'</span><span class="content">junit</span><span class="delimiter">'</span></span>
       })
   }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="controlling_jar_content_merging">2.8. Controlling JAR Content Merging</h3>
<div class="paragraph">
<p>Shadow allows for customizing the process by which the output JAR is generated through the
<a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/Transformer.html"><code>Transformer</code></a> interface.
This is a concept that has been carried over from the original Maven Shade implementation.
A <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/Transformer.html"><code>Transformer</code></a> is invoked for each entry in the JAR before being written to
the final output JAR.
This allows a <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/Transformer.html"><code>Transformer</code></a> to determine if it should process a particular
entry and apply any modifications beforewriting the stream to the output.</p>
</div>
<div class="listingblock">
<div class="title">Adding a Transformer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  transform(MyTransformer.class)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, a <code>Transformer</code> can accept a <code>Closure</code> to configure the provided <code>Transformer</code>.</p>
</div>
<div class="listingblock">
<div class="title">Configuring a Transformer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  transform(MyTransformer.class) {
    enable = <span class="predefined-constant">true</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An instantiated instance of a <code>Transformer</code> can also be provided.</p>
</div>
<div class="listingblock">
<div class="title">Adding a Transformer Instance</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  transform(<span class="keyword">new</span> MyTransformer(<span class="key">enabled</span>: <span class="predefined-constant">true</span>))
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="merging_service_descriptor_files">2.8.1. Merging Service Descriptor Files</h4>
<div class="paragraph">
<p>Java libraries often contain service descriptors files in the <code>META-INF/services</code> directory of the JAR.
A service descriptor typically contains a line delimited list of classes that are supported for a particular <em>service</em>.
At runtime, this file is read and used to configure library or application behavior.</p>
</div>
<div class="paragraph">
<p>Multiple dependencies may use the same service descriptor file name.
In this case, it is generally desired to merge the content of each instance of the file into a single output file.
The <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/ServiceFileTransformer.html"><code>ServiceFileTransformer</code></a> class is used to perform this merging.
By default, it will merge each copy of a file under <code>META-INF/services</code> into a single file in the output JAR.</p>
</div>
<div class="listingblock">
<div class="title">Merging Service Files</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  mergeServiceFiles()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code snippet is a convenience syntax for calling
<a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html#transform(Class&lt;? extends Transformer&gt;)"><code>transform(ServiceFileTransformer.class)</code></a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Groovy Extension Module descriptor files (located at <code>META-INF/services/org.codehaus.groovy.runtime.ExtensionModule</code>)
are ignored by the <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/ServiceFileTransformer.html"><code>ServiceFileTransformer</code></a>.
This is due to these files having a different syntax than standard service descriptor files.
Use the <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html#mergeGroovyExtensionModules()"><code>mergeGroovyExtensionModules()</code></a> method to merge
these files if your dependencies contain them.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="configuring_the_location_of_service_descriptor_files">Configuring the Location of Service Descriptor Files</h5>
<div class="paragraph">
<p>By default the <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/ServiceFileTransformer.html"><code>ServiceFileTransformer</code></a> is configured to merge
files in <code>META-INF/services</code>.
This directory can be overridden to merge descriptor files in a different location.</p>
</div>
<div class="listingblock">
<div class="title">Merging Service Files in a Specific Directory</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  mergeServiceFiles {
    path = <span class="string"><span class="delimiter">'</span><span class="content">META-INF/custom</span><span class="delimiter">'</span></span>
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="excluding_including_specific_service_descriptor_files_from_merging">Excluding/Including Specific Service Descriptor Files From Merging</h5>
<div class="paragraph">
<p>The <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/ServiceFileTransformer.html"><code>ServiceFileTransformer</code></a> class supports specifying specific
files to include or exclude from merging.</p>
</div>
<div class="listingblock">
<div class="title">Excluding a Service Descriptor From Merging</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  mergeServiceFiles {
    exclude <span class="string"><span class="delimiter">'</span><span class="content">META-INF/services/com.acme.*</span><span class="delimiter">'</span></span>
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="merging_groovy_extension_modules">2.8.2. Merging Groovy Extension Modules</h4>
<div class="paragraph">
<p>Shadow provides a specific transformer for dealing with Groovy extension module files.
This is due to their special syntax and how they need to be merged together.
The <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/GroovyExtensionModuleTransformer.html"><code>GroovyExtensionModuleTransformer</code></a> will handle these
files.
The <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task also provides a short syntax method to add this transformer.</p>
</div>
<div class="listingblock">
<div class="title">Merging Groovy Extension Modules</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  mergeGroovyExtensionModules()
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="appending_text_files">2.8.3. Appending Text Files</h4>
<div class="paragraph">
<p>Generic text files can be appended together using the
<a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/AppendingTransformer.html"><code>AppendingTransformer</code></a>.
Each file is appended using new lines to separate content.
The <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> task provides a short syntax method of
<a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html#append(java.lang.String)"><code>append(String)</code></a> to configure this transformer.</p>
</div>
<div class="listingblock">
<div class="title">Appending a Property File</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  append <span class="string"><span class="delimiter">'</span><span class="content">test.properties</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="appending_xml_files">2.8.4. Appending XML Files</h4>
<div class="paragraph">
<p>XML files require a special transformer for merging.
The <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/XmlAppendingTransformer.html"><code>XmlAppendingTransformer</code></a> reads each XML document and merges
each root element into a single document.
There is no short syntax method for the <a href="api/com/github/jengelman/gradle/plugins/shadow/transformers/XmlAppendingTransformer.html"><code>XmlAppendingTransformer</code></a>.
It must be added using the <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html#transform(Class&lt;? extends Transformer&gt;)"><code>transform</code></a> methods.</p>
</div>
<div class="listingblock">
<div class="title">Appending a XML File</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
  tranform(XmlAppendingTransformer.class) {
    resource = <span class="string"><span class="delimiter">'</span><span class="content">properties.xml</span><span class="delimiter">'</span></span>
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="relocating_packages">2.9. Relocating Packages</h3>
<div class="paragraph">
<p>Shade is capable of scanning a project&#8217;s classes and relocating specific dependencies to a new location.
This is often required when one of the dependencies is susceptible to breaking changes in versions or
to classpath pollution in a downstream project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Google&#8217;s Guava and the ASM library are typical cases where package relocation can come in handy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Shadow uses the ASM library to modify class byte code to replace the package name and any import
statements for a class.
Any non-class files that are stored within a package structure are also relocated to the new location.</p>
</div>
<div class="listingblock">
<div class="title">Relocating a Package</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
   relocate <span class="string"><span class="delimiter">'</span><span class="content">junit.framework</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">shadow.junit</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code snippet will rewrite the location for any class in the <code>junit.framework</code> to be <code>shadow.junit</code>.
For example, the class <code>junit.textui.TestRunner</code> becomes <code>shadow.junit.TestRunner</code>.
In the resulting JAR, the class file is relocated from <code>junit/textui/TestRunner.class</code> to
<code>shadow/junit/TestRunner.class</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Relocation operates at a package level.
It is not necessary to specify any patterns for matching, it will operate simply on the prefix
provided.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Relocation will be applied globally to all instance of the matched prefix.
That is, it does <strong>not</strong> scope to <em>only</em> the dependencies being shadowed.
Be specific as possible when configuring relocation as to avoid unintended relocations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="filtering_relocation">2.9.1. Filtering Relocation</h4>
<div class="paragraph">
<p>Specific classes or files can be <code>included</code>/<code>excluded</code> from the relocation operation if necessary.</p>
</div>
<div class="listingblock">
<div class="title">Configuring Filtering for Relocation</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">shadowJar {
   relocate(<span class="string"><span class="delimiter">'</span><span class="content">junit.textui</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>) {
       exclude <span class="string"><span class="delimiter">'</span><span class="content">junit.textui.TestRunner</span><span class="delimiter">'</span></span>
   }
   relocate(<span class="string"><span class="delimiter">'</span><span class="content">junit.framework</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>) {
       include <span class="string"><span class="delimiter">'</span><span class="content">junit.framework.Test*</span><span class="delimiter">'</span></span>
   }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating_a_custom_shadowjar_task">3. Creating a Custom ShadowJar Task</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The built in <code>shadowJar</code> task only provides an output for the <code>main</code> source set of the project.
It is possible to add arbitrary <a href="api/com/github/jengelman/gradle/plugins/shadow/tasks/ShadowJar.html"><code>ShadowJar</code></a> tasks to a project.
When doing so, ensure that the <code>configurations</code> property is specified to inform Shadow which dependencies to merge
into the output.</p>
</div>
<div class="listingblock">
<div class="title">Shadowing Test Sources and Dependencies</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">task testJar(<span class="key">type</span>: ShadowJar) {
  classifier = <span class="string"><span class="delimiter">'</span><span class="content">tests</span><span class="delimiter">'</span></span>
  from sourceSets.test.output
  configurations = [project.configurations.testRuntime]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code snippet above will geneated a shadowed JAR contain both the <code>main</code> and <code>test</code> sources as well as all <code>runtime</code>
and <code>testRuntime</code> dependencies.
The file is output to <code>build/libs/&lt;project&gt;-&lt;version&gt;-tests.jar</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integrating_with_application_plugin">4. Integrating with Application Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Shadow reacts to the presence of Gradle&#8217;s
<a href="https://docs.gradle.org/current/userguide/application_plugin.html"><code>application</code></a> plugin and will automatically
configure additional tasks for running the shadowed JAR and creating distributions containing the shadowed JAR.</p>
</div>
<div class="paragraph">
<p>Just like the normal <code>jar</code> task, when the <code>application</code> plugin is applied, the <code>shadowJar</code> manifest will be
configured to contain the <code>Main-Class</code> attribute with the value specified in the project&#8217;s <code>mainClassName</code> attribute.</p>
</div>
<div class="listingblock">
<div class="title">Using Shadow with Application Plugin</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.shadow</span><span class="delimiter">'</span></span>

mainClassName = <span class="string"><span class="delimiter">'</span><span class="content">myapp.Main</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="running_the_shadow_jar">4.1. Running the Shadow JAR</h3>
<div class="paragraph">
<p>When applied along with the <code>application</code> plugin, the <code>runShadow</code> task will be created for starting
the application from the shadowed JAR.
The <code>runShadow</code> task is a <a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html"><code>JavaExec</code></a>
task that is configured to execute <code>java -jar myproject-all.jar</code>.
It can be configured the same as any other <code>JavaExec</code> task.</p>
</div>
<div class="listingblock">
<div class="title">Configuring the runShadow Task</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">runShadow {
  args <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="distributing_the_shadow_jar">4.2. Distributing the Shadow JAR</h3>
<div class="paragraph">
<p>The Shadow plugin will also configure distribution tasks when in the presence of the <code>application</code> plugin.
The plugin will create <code>shadowDistZip</code> and <code>shadowDistTar</code> which creates Zip and Tar distributions
respectively.
Each distribution will contain the shadowed JAR file along with the necessary start scripts to launch
the application.</p>
</div>
<div class="paragraph">
<p>Additionally, the plugin will create the <code>installShadowDist</code> and <code>startShadowScripts</code> tasks which stages the necessary
files for a distribution to <code>build/install/&lt;project name&gt;-shadow/</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publishing_shadow_jars">5. Publishing Shadow JARs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="publishing_with_maven_publish_plugin">5.1. Publishing with Maven-Publish Plugin</h3>
<div class="paragraph">
<p>The Shadow plugin will automatically configure the necessary tasks in the presence of Gradle&#8217;s
<code>maven-publish</code> plugin.
The plugin provides the <code>component</code> method from the <code>shadow</code> extension to configure the
publication with the necessary artifact and dependencies in the POM file.</p>
</div>
<div class="listingblock">
<div class="title">Publishing a Shadow JAR with the Maven-Publish Plugin</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">maven-publish</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.shadow</span><span class="delimiter">'</span></span>

publishing {
  publications {
    shadow(MavenPublication) { publication -&gt;
      project.shadow.component(publication)
    }
  }
  repositories {
    maven {
      url <span class="string"><span class="delimiter">&quot;</span><span class="content">http://repo.myorg.com</span><span class="delimiter">&quot;</span></span>
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="publishing_with_maven_plugin">5.2. Publishing with Maven Plugin</h3>
<div class="paragraph">
<p>The Shadow plugin will automatically configure the necessary tasks in the presence of Gradle&#8217;s
<code>maven</code> plugin.
To publish the JAR, simply configure the publish location for the <code>uploadShadow</code> task and execute it.</p>
</div>
<div class="listingblock">
<div class="title">Publishing a Shadow JAR with the Maven Plugin</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">maven</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.shadow</span><span class="delimiter">'</span></span>

uploadShadow {
  repositories {
    mavenDeployer {
      repository(<span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://repo.myorg.com</span><span class="delimiter">&quot;</span></span>)
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="shadow_configuration_and_publishing">5.3. Shadow Configuration and Publishing</h3>
<div class="paragraph">
<p>The Shadow plugin provides a custom configuration (<code>configurations.shadow</code>) to specify
runtime dependencies that are <strong>not</strong> merged into the final JAR file.
When configuring publishing with the Shadow plugin, the dependencies in the <code>shadow</code>
configuration, are translated to become <code>RUNTIME</code> scoped dependencies of the
published artifact.</p>
</div>
<div class="paragraph">
<p>No other dependencies are automatically configured for inclusion in the POM file.
For example, excluded dependencies are <strong>not</strong> automatically added to the POM file or
if the configuration for merging are modified by specifying
<code>shadowJar.configurations = [configurations.myconfiguration]</code>, there is no automatic
configuration of the POM file.</p>
</div>
<div class="paragraph">
<p>This automatic configuration occurs <em>only</em> when using the above methods for
configuring publishing. If this behavior is not desirable, then publishing <strong>must</strong>
be manually configured.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using_shadow_in_multi_project_builds">6. Using Shadow in Multi-Project Builds</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using Shadow in a multi-project build, project dependencies will be treated the same as
external dependencies.
That is a project dependency will be merged into the <code>shadowJar</code> output of the project that
is applying the Shadow plugin.</p>
</div>
<div class="sect2">
<h3 id="depending_on_the_shadow_jar_from_another_project">6.1. Depending on the Shadow Jar from Another Project</h3>
<div class="paragraph">
<p>In a multi-project build there may be one project that applies Shadow and another that
requires the shadowed JAR as a dependency.
In this case, use Gradle&#8217;s normal dependency declaration mechanism to depend on the <code>shadow</code>
configuration of the shadowed project.</p>
</div>
<div class="listingblock">
<div class="title">Depending On Shadow Output of Project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
  compile project(<span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">api</span><span class="delimiter">'</span></span>, <span class="key">configuration</span>: <span class="string"><span class="delimiter">'</span><span class="content">shadow</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using_shadow_to_package_gradle_plugins">7. Using Shadow to Package Gradle Plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some scenarios, writing a Gradle plugin can be problematic because your plugin may depend on a version that
conflicts with the same dependency provided by the Gradle runtime. If this is the case, then you can utilize Shadow
to relocate your dependencies to a different package name to avoid the collision.</p>
</div>
<div class="paragraph">
<p>Configuring the relocation has always been possible, but the build author is required to know all the package names
before hand. Shadow v2.0 corrects this by introducing a new task type <code>ConfigureShadowRelocation</code>.
Tasks of this type are configured to target an instance of a <code>ShadowJar</code> task and run immediately before it.</p>
</div>
<div class="paragraph">
<p>The <code>ConfigureShadowRelocation</code> task, scans the dependencies from the configurations specified on the associated
<code>ShadowJar</code> task and collects the package names contained within them. It then configures relocation for these
packages using the specified <code>prefix</code> on the associated <code>ShadowJar</code> task.</p>
</div>
<div class="paragraph">
<p>While this is useful for developing Gradle plugins, nothing about the <code>ConfigureShadowRelocation</code> task is tied to
Gradle projects. It can be used for standard Java or Groovy projects.</p>
</div>
<div class="paragraph">
<p>A simple Gradle plugin can use this feature by applying the <code>plugin-shadow</code> plugin and configuring the dependencies
like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">plugins {
  id <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.plugin-shadow</span><span class="delimiter">'</span></span> version <span class="string"><span class="delimiter">'</span><span class="content">2.0.4</span><span class="delimiter">'</span></span>
  id <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
}

dependencies {
    shadow localGroovy()
    shadow gradleApi()

    compile <span class="string"><span class="delimiter">'</span><span class="content">org.jdom:jdom2:2.0.6</span><span class="delimiter">'</span></span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.ow2.asm:asm:6.0</span><span class="delimiter">'</span></span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.ow2.asm:asm-commons:6.0</span><span class="delimiter">'</span></span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">commons-io:commons-io:2.4</span><span class="delimiter">'</span></span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.apache.ant:ant:1.9.4</span><span class="delimiter">'</span></span>
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.codehaus.plexus:plexus-utils:2.0.6</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>localGroovy()</code> and <code>gradleApi()</code> dependencies are added to the <code>shadow</code> configuration instead of the
normal <code>compile</code> configuration. These 2 dependencies are provided by Gradle to compile your project but are ultimately
provided by the Gradle runtime when executing the plugin. Thus, it is <em>not</em> advisable to bundle these dependencies
with your plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="change_log">8. Change Log</h2>
<div class="sectionbody">
<h3 id="v2_0_4_2018_04_27" class="discrete">v2.0.4 (2018-04-27)</h3>
<div class="ulist">
<ul>
<li>
<p>Update to ASM 6.1.1 to address performance issues - <a href="https://gitlab.ow2.org/asm/asm/issues/317816" class="bare">https://gitlab.ow2.org/asm/asm/issues/317816</a></p>
</li>
<li>
<p>Close InputStreams after using them (<a href="https://github.com/johnrengelman/shadow/issues/364">Issue #364</a>)</p>
</li>
<li>
<p>Remove usage of Gradle internal <code>AbstractFileCollection</code>.</p>
</li>
<li>
<p>Add task annotations to remove warnings when validating plugin.</p>
</li>
</ul>
</div>
<h3 id="v2_0_3_2018_03_24" class="discrete">v2.0.3 (2018-03-24)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ttsiebzehntt">ttsiebzehntt</a> - Update to ASM 6.1</p>
</li>
<li>
<p><a href="https://github.com/sgnewson">sgnewson</a> - Fix deprecated Gradle warnings <a href="https://github.com/johnrengelman/shadow/pull/356">#356</a></p>
</li>
</ul>
</div>
<h3 id="v2_0_2_2017_12_12" class="discrete">v2.0.2 (2017-12-12)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ben-adazza">Ben Adazza</a>, <a href="https://github.com/tylerbenson">Tyler Benson</a> - documentation</p>
</li>
<li>
<p><a href="https://github.com/mark-vieira">Marke Vieira</a> - Support multi-project builds with Build-Scan integration</p>
</li>
<li>
<p>Upgrade to ASM 6 <a href="https://github.com/johnrengelman/shadow/issues/294">Issue #294</a>, <a href="https://github.com/johnrengelman/shadow/issues/303">Issue #303</a></p>
</li>
<li>
<p><a href="https://github.com/rspieldenner">Rob Spieldenner</a> - Fix integration with <code>application</code> plugin in Gradle 4.3 <a href="https://github.com/johnrengelman/shadow/issues/339">Issues #339</a></p>
</li>
<li>
<p>Fixed deprecation warning from Gradle 4.2+ <a href="https://github.com/johnrengelman/shadow/issues/326">Issue #326</a></p>
</li>
</ul>
</div>
<h3 id="v2_0_1_2017_06_23" class="discrete">v2.0.1 (2017-06-23)</h3>
<div class="ulist">
<ul>
<li>
<p>Fix <code>null+configuration</code> error (<a href="https://github.com/johnrengelman/shadow/issues/297">Issue #297</a>)</p>
</li>
</ul>
</div>
<h3 id="v2_0_0_2017_05_09" class="discrete">v2.0.0 (2017-05-09)</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Breaking Change!</strong> Restrict Plugin to Gradle 3.0+</p>
</li>
<li>
<p><strong>Breaking Change!</strong> Build with Java 7</p>
</li>
<li>
<p><strong>Breaking Change!</strong> Updated <code>Transformer</code> interface to accept <code>TransformerContext</code> object instead of individual values</p>
</li>
<li>
<p><strong>Breaking Change!</strong> Updated <code>Relocator</code> interface to accept <code>RelocatePathContext</code> and <code>RelocateClassContext</code> objects</p>
</li>
<li>
<p><strong>Breaking Change!</strong> Distribution tasks <code>distShadowZip</code> and <code>distShadowTar</code> have been removed and replaced with the standard <code>shadowDistZip</code> and <code>shadowDistTar</code> from the Gradle Distribution plugin.</p>
</li>
<li>
<p><strong>Breaking Change!</strong> The <code>installShadowApp</code> task has been removed and replaced with the standard <code>installShadowDist</code> task from the Gradle Distribution plugin.</p>
</li>
<li>
<p><strong>Breaking Change!</strong> The new <code>installShadowDist</code> task outputs to <code>build/install/&lt;project name&gt;-shadow</code> per the standard (formerly was <code>build/installShadow</code>)</p>
</li>
<li>
<p><strong>Breaking Change!</strong> <code>component.shadow</code> removed in favor of <code>project.shadow.component(publication)</code> so as to remove dependency on internal Gradle APIs.</p>
</li>
<li>
<p><em>NEW</em> Introducing <code>ConfigureShadowRelocation</code> task and <code>com.github.johnrengelman.plugin-shadow</code> plugin to automatically configure package relocation for Gradle plugins.</p>
</li>
<li>
<p><em>NEW</em> Integration with Gradle Build Scans. When running a <code>ShadowJar</code> task with Build Scans, custom values including dependencies merged anc package relocations are published in the scan.</p>
</li>
<li>
<p>Build Shadow w/ Shadow. This will help prevent any future classpath conflicts with Gradle.</p>
</li>
<li>
<p>Replace <code>startShadowScripts</code> tasks with Gradle&#8217;s built-in <code>CreateStartScripts</code> type.</p>
</li>
<li>
<p>Build with Gradle 3.1</p>
</li>
<li>
<p><a href="https://github.com/marcphilipp">Marc Philipp</a> - Add <code>keyTransformer</code> property to <code>PropertiesFileTransformer</code></p>
</li>
<li>
<p>Update to ASM 5.2</p>
</li>
<li>
<p><a href="https://github.com/pkubowicz">Piotr Kubowicz</a> - Support <code>api</code>, <code>implementation</code>, <code>runtimeOnly</code> dependency configurations introdcued in Gradle 3.3</p>
</li>
</ul>
</div>
<h3 id="v1_2_4_2016_11_03" class="discrete">v1.2.4 (2016-11-03)</h3>
<div class="ulist">
<ul>
<li>
<p>Don&#8217;t resolve dependency configurations during config phase (<a href="https://github.com/johnrengelman/shadow/issues/129">Issue #128</a>)</p>
</li>
<li>
<p>Build plugin with Gradle 2.14</p>
</li>
<li>
<p>Fix docs regarding inheriting Jar manifest (<a href="https://github.com/johnrengelman/shadow/issues/251">Issue #251</a>)</p>
</li>
<li>
<p><a href="https://github.com/ethankhall">Ethan Hall</a> - Support projects that configure uploading to Ivy repositories (<a href="https://github.com/johnrengelman/shadow/pull/256">Pull Request #256</a>)</p>
</li>
<li>
<p>Force task to depend on dependency configuration (<a href="https://github.com/johnrengelman/shadow/issues/152">Issue #152</a>)</p>
</li>
<li>
<p>Do not explode ZIP files into shadow jar (<a href="https://github.com/johnrengelman/shadow/issues/196">Issue #196</a>)</p>
</li>
<li>
<p><a href="https://github.com/jszakmeister">John Szakmeister</a> - Preserve timestamps on merged jar entries (<a href="https://github.com/johnrengelman/shadow/pull/260">Pull Request #260</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_2_3_2016_01_25" class="discrete">v1.2.3 (2016-01-25)</h3>
<div class="ulist">
<ul>
<li>
<p>Support for Gradle 2.11-rc-1 (<a href="https://github.com/johnrengelman/shadow/issues/177">Issue #177</a>)</p>
</li>
<li>
<p>Convert internal framework to <a href="https://docs.gradle.org/current/userguide/test_kit.html">Gradle TestKit</a></p>
</li>
<li>
<p><a href="https://github.com/fkorotkov">Fedor Korotkov</a> - Use BufferedOutputStream when writing the Zip file (<a href="https://github.com/johnrengelman/shadow/pull/171">PR #171</a>)</p>
</li>
<li>
<p><a href="https://github.com/hbchai">Haw-Bin Chai</a> - Quote Jar path in Windows start script as it may contain spaces (<a href="https://github.com/johnrengelman/shadow/pull/170">PR #170</a>)</p>
</li>
<li>
<p><a href="https://github.com/siordache">Serban Iordache</a> - Evaluate relocation specs when merging service descriptors (<a href="https://github.com/johnrengelman/shadow/pull/165">PR #165</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_2_2_2015_07_17" class="discrete">v1.2.2 (2015-07-17)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Minecrell">Minecrell</a> - Gradle 2.5 compatibility (<a href="https://github.com/johnrengelman/shadow/issues/147">Issue #147</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_2_1_2015_01_23" class="discrete">v1.2.1 (2015-01-23)</h3>
<div class="ulist">
<ul>
<li>
<p>Apply package relocations to dependency resources (<a href="https://github.com/johnrengelman/shadow/issues/114">Issue #114</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_2_0_2014_11_24" class="discrete">v1.2.0 (2014-11-24)</h3>
<div class="ulist">
<ul>
<li>
<p>Re-organize some code to remove need for forcing the Gradle API ClassLoader to allow the <code>org.apache.tools.zip</code> package.</p>
</li>
<li>
<p>Upgrade JDOM library from 1.1 to 2.0.5 (change dependency from <code>jdom:jdom:1.1</code> to <code>org.jdom:jdom2:2.0.5</code>) (<a href="https://github.com/johnrengelman/shadow/issues/98">Issue #98</a>)</p>
</li>
<li>
<p>Convert ShadowJar.groovy to ShadowJar.java to workaround binary incompatibility introduced by Gradle 2.2 ((<a href="https://github.com/johnrengelman/shadow/issues/106">Issue #106</a>)</p>
</li>
<li>
<p>Updated ASM library to <code>5.0.3</code> to support JDK8 (<a href="https://github.com/johnrengelman/shadow/issues/97">Issue #97</a>)</p>
</li>
<li>
<p>Allows for regex pattern matching in the <code>dependency</code> string when including/excluding (<a href="https://github.com/johnrengelman/shadow/issues/83">Issue #83</a>)</p>
</li>
<li>
<p>Apply package relocations to resource files (<a href="https://github.com/johnrengelman/shadow/issues/93">Issue #93</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_1_2_2014_09_09" class="discrete">v1.1.2 (2014-09-09)</h3>
<div class="ulist">
<ul>
<li>
<p>fix bug in <code>runShadow</code> where dependencies from the <code>shadow</code> configuration are not available (<a href="https://github.com/johnrengelman/shadow/issues/94">Issue #94</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_1_1_2014_08_27" class="discrete">v1.1.1 (2014-08-27)</h3>
<div class="ulist">
<ul>
<li>
<p>Fix bug in <code>'createStartScripts'</code> task that was causing it to not execute <code>'shadowJar'</code> task (<a href="https://github.com/johnrengelman/shadow/issues/90">Issue #90</a>)</p>
</li>
<li>
<p>Do not include <code>null</code> in ShadowJar Manifest <code>'Class-Path'</code> value when <code>jar</code> task does not specify a value for it. (<a href="https://github.com/johnrengelman/shadow/issues/92">Issue #92</a>)</p>
</li>
<li>
<p>ShadowJar Manifest <code>'Class-Path'</code> should reference jars from <code>'shadow'</code> config as relative to location of <code>shadowJar</code> output (<a href="https://github.com/johnrengelman/shadow/issues/91">Issue #91</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_1_0_2014_08_26" class="discrete">v1.1.0 (2014-08-26)</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Breaking Change!</strong> Fix leaking of <code>shadowJar.manifest</code> into <code>jar.manifest</code>. (<a href="https://github.com/johnrengelman/shadow/issues/82">Issue #82</a>)
To simplify behavior, the <code>shadowJar.appendManifest</code> method has been removed. Replace uses with <code>shadowJar.manifest</code></p>
</li>
<li>
<p><code>ShadowTask</code> now has a <code>configurations</code> property that is resolved to the files in the resolved configuration before
being added to the copy spec. This allows for an easier implementation for filtering. The default 'shadowJar' task
has the convention of adding the <code>'runtime'</code> scope to this list. Manually created instances of <code>ShadowTask</code> have no
configurations added by default and can be configured by setting <code>task.configurations</code>.</p>
</li>
<li>
<p>Properly configure integration with the <code>'maven'</code> plugin when added. When adding <code>'maven'</code> the <code>'uploadShadow'</code> task
will now properly configure the POM dependencies by removing the <code>'compile'</code> and <code>'runtime'</code> configurations from the
POM and adding the <code>'shadow'</code> configuration as a <code>RUNTIME</code> scope in the POM. This behavior matches the behavior when
using the <code>'maven-publish'</code> plugin.</p>
</li>
<li>
<p><a href="https://github.com/mhurne">Matt Hurne</a> - Allow <code>ServiceFileTransformer</code> to specify include/exclude patterns for
files within the configured path to merge.</p>
</li>
<li>
<p><a href="https://github.com/mhurne">Matt Hurne</a> - Added <code>GroovyExtensionModuleTransformer</code> for merging Groovy Extension module
descriptor files. The existing <code>ServiceFileTransformer</code> now excludes Groovy Extension Module descriptors by default.</p>
</li>
<li>
<p><code>distShadowZip</code> and <code>distShadowZip</code> now contain the shadow library and run scripts instead of the default from the <code>'application'</code> plugin (<a href="https://github.com/johnrengelman/shadow/issues/89">Issue #89</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_0_3_2014_07_29" class="discrete">v1.0.3 (2014-07-29)</h3>
<div class="ulist">
<ul>
<li>
<p>Make service files root path configurable for <code>ServiceFileTransformer</code> (<a href="https://github.com/johnrengelman/shadow/issues/72">Issue #72</a>)</p>
</li>
<li>
<p><a href="https://github.com/aalmiray">Andres Almiray</a> - Added PropertiesFileTransformer (<a href="https://github.com/johnrengelman/shadow/issues/73">Issue #73</a>)</p>
</li>
<li>
<p><a href="https://github.com/brandonkearby">Brandon Kearby</a> - Fixed StackOverflow when a cycle occurs in the resolved dependency graph (<a href="https://github.com/johnrengelman/shadow/pull/69">Issue #69</a>)</p>
</li>
<li>
<p>Apply Transformers to project resources (<a href="https://github.com/johnrengelman/shadow/issues/70">Issue #70</a>), <a href="https://github.com/johnrengelman/shadow/issues/71">Issue #71</a>)</p>
</li>
<li>
<p>Do not drop non-class files from dependencies when relocation is enabled. Thanks to <a href="https://github.com/Minecrell">Minecrell</a> for digging into this. (<a href="https://github.com/johnrengelman/shadow/issues/61">Issue #61</a>)</p>
</li>
<li>
<p>Remove support for applying individual sub-plugins by Id (easier maintenance and cleaner presentation in Gradle Portal)</p>
</li>
</ul>
</div>
<h3 id="v1_0_2_2014_07_07" class="discrete">v1.0.2 (2014-07-07)</h3>
<div class="ulist">
<ul>
<li>
<p>Do not add an empty Class-Path attribute to the manifest when the <code>shadow</code> configuration contains no dependencies.</p>
</li>
<li>
<p><code>runShadow</code> now registers <code>shadowJar</code> as an input. Previously, <code>runShadow</code> did not execute <code>shadowJar</code> and an error occurred.</p>
</li>
<li>
<p>Support Gradle 2.0 (<a href="https://github.com/johnrengelman/shadow/issues/66">Issue #66</a>)</p>
</li>
<li>
<p>Do not override existing 'Class-Path' Manifest attribute settings from Jar configuration. Instead combine. (<a href="https://github.com/johnrengelman/shadow/issues/65">Issue #65</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_0_1_2014_06_28" class="discrete">v1.0.1 (2014-06-28)</h3>
<div class="ulist">
<ul>
<li>
<p>Fix issue where non-class files are dropped when using relocation (<a href="https://github.com/johnrengelman/shadow/issues/58">Issue #58</a>)</p>
</li>
<li>
<p>Do not create a <code>/</code> directory inside the output jar.</p>
</li>
<li>
<p>Fix <code>runShadow</code> task to evaluate the <code>shadowJar.archiveFile</code> property at execution time. (<a href="https://github.com/johnrengelman/shadow/issues/60">Issue #60</a>)</p>
</li>
</ul>
</div>
<h3 id="v1_0_0_2014_06_27" class="discrete">v1.0.0 (2014-06-27)</h3>
<div class="ulist">
<ul>
<li>
<p>Previously known as v0.9.0</p>
</li>
<li>
<p>All changes from 0.9.0-M1 to 0.9.0-M5</p>
</li>
<li>
<p>Properly configure the ShadowJar task inputs to observe the include/excludes from the <code>dependencies</code> block. This
allows UP-TO-DATE checking to work properly when changing the <code>dependencies</code> rules (<a href="https://github.com/johnrengelman/shadow/issues/54">Issue #54</a>)</p>
</li>
<li>
<p>Apply relocation remappings to classes and imports in source project (<a href="https://github.com/johnrengelman/shadow/issues/55">Issue #55</a>)</p>
</li>
<li>
<p>Do not create directories in jar for source of remapped class, created directories in jar for destination of remapped classes (<a href="https://github.com/johnrengelman/shadow/issues/53">Issue #53</a>)</p>
</li>
</ul>
</div>
<h3 id="v0_9_0_m5" class="discrete">v0.9.0-M5</h3>
<div class="ulist">
<ul>
<li>
<p>Add commons-io to compile classpath</p>
</li>
<li>
<p>Update asm library to 4.1</p>
</li>
</ul>
</div>
<h3 id="v0_9_0_m4" class="discrete">v0.9.0-M4</h3>
<div class="ulist">
<ul>
<li>
<p>Break plugin into multiple sub-plugins. <code>ShadowBasePlugin</code> is always applied.
<code>ShadowJavaPlugin</code> and <code>ShadowApplicationPlugin</code> are applied in reaction to applying the <code>java</code> and <code>application</code>
plugins respectively.</p>
</li>
<li>
<p>Shadow does not applied <code>java</code> plugin automatically. <code>java</code> or <code>groovy</code> must be applied in conjunction with <code>shadow</code>.</p>
</li>
<li>
<p>Moved artifact filtering to <code>dependencies {}</code> block underneath <code>shadowJar</code>. This allows better include/exclude control
for dependencies.</p>
</li>
<li>
<p>Dependencies added to the <code>shadow</code> configuration are automatically added to the <code>Class-Path</code> attribute in the manifest
for <code>shadowJar</code></p>
</li>
<li>
<p>Applying <code>application</code> plugin and settings <code>mainClassName</code> automatically configures the <code>Main-Class</code> attribute in
the manifest for <code>shadowJar</code></p>
</li>
<li>
<p><code>runShadow</code> now utilizes the output of the <code>shadowJar</code> and executes using <code>java -jar &lt;shadow jar file&gt;</code></p>
</li>
<li>
<p>Start Scripts for shadow distribution now utilize <code>java -jar</code> to execute instead of placing all files on classpath
and executing main class.</p>
</li>
<li>
<p>Excluding/Including dependencies no longer includes transitive dependencies. All dependencies for inclusion/exclusion
must be explicitly configured via a spec.</p>
</li>
</ul>
</div>
<h3 id="v0_9_0_m3" class="discrete">v0.9.0-M3</h3>
<div class="ulist">
<ul>
<li>
<p>Use commons.io FilenameUtils to determine name of resolved jars for including/excluding</p>
</li>
</ul>
</div>
<h3 id="v0_9_0_m2" class="discrete">v0.9.0-M2</h3>
<div class="ulist">
<ul>
<li>
<p>Added integration with <code>application</code> plugin to replace old <code>OutputSignedJars</code> task</p>
</li>
<li>
<p>Fixed bug that resulted in duplicate file entries in the resulting Jar</p>
</li>
<li>
<p>Changed plugin id to 'com.github.johnrengelman.shadow' to support Gradle 2.x plugin infrastructure.</p>
</li>
</ul>
</div>
<h3 id="v0_9_0_m1" class="discrete">v0.9.0-M1</h3>
<div class="ulist">
<ul>
<li>
<p>Rewrite based on Gradle Jar Task</p>
</li>
<li>
<p><code>ShadowJar</code> now extends <code>Jar</code></p>
</li>
<li>
<p>Removed <code>signedCompile</code> and <code>signedRuntime</code> configurations in favor of <code>shadow</code> configuration</p>
</li>
<li>
<p>Removed <code>OutputSignedJars</code> task</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="about_this_project">9. About This Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I started this project in December of 2012. We were working on converting from a monolithic application into a the
new hot jazz of "microservices" using Dropwizard.
I had also just started learning about Gradle and I knew that the incremental build system it provided would benefit
our development team greatly.
Unfortunately, the closest thing that Gradle had to Maven&#8217;s Shade plugin was its ability to create application TARs and
ZIPs.</p>
</div>
<div class="paragraph">
<p>So, Charlie Knudsen and myself set out to port the existing Shade code into a Gradle plugin.
This port is what existing up until the <code>0.9</code> milestone releases for Shadow.
It functioned, but it wasn&#8217;t idiomatic Gradle by any means.</p>
</div>
<div class="paragraph">
<p>Starting with 0.9, Shadow was rewritten from the ground up as standard Gradle plugin and leveraged as much of Gradle&#8217;s
classes and concepts as possible.
At the same time as the 0.9 release, Gradle was announcing the <a href="https://plugins.gradle.org">Gradle Plugin Portal</a> and
so Shadow was published there.</p>
</div>
<div class="paragraph">
<p>Shadow has had nearly ~900,000 downloads from Bintray and countless more from the Gradle Plugin Portal.</p>
</div>
<div class="sect2">
<h3 id="maintainers">9.1. Maintainers</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/johnrengelman">John Engelman</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="contributors">9.2. Contributors</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/charliek">Charlie Knudsen</a></p>
</li>
<li>
<p><a href="https://github.com/fkorotkov">Fedor Korotkov</a></p>
</li>
<li>
<p><a href="https://github.com/hbchai">Haw-Bin Chai</a></p>
</li>
<li>
<p><a href="https://github.com/siordache">Serban Iordache</a></p>
</li>
<li>
<p><a href="https://github.com/Minecrell">Minecrell</a></p>
</li>
<li>
<p><a href="https://github.com/mhurne">Matt Hurne</a></p>
</li>
<li>
<p><a href="https://github.com/aalmiray">Andres Almiray</a></p>
</li>
<li>
<p><a href="https://github.com/brandonkearby">Brandon Kearby</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.0.4<br>
Last updated 2017-11-09 10:21:39 -06:00
</div>
</div>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-321220-4', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>