(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{171:function(e,n,t){"use strict";t.r(n);var a=t(0),s=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"using-shadow-to-package-gradle-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-shadow-to-package-gradle-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" Using Shadow to Package Gradle Plugins")]),e._v(" "),t("p",[e._v("In some scenarios, writing a Gradle plugin can be problematic because your plugin may depend on a version that\nconflicts with the same dependency provided by the Gradle runtime. If this is the case, then you can utilize Shadow\nto relocate your dependencies to a different package name to avoid the collision.")]),e._v(" "),t("p",[e._v("Configuring the relocation has always been possible, but the build author is required to know all the package names\nbefore hand. Shadow v2.0 corrects this by introducing a new task type "),t("code",[e._v("ConfigureShadowRelocation")]),e._v(".\nTasks of this type are configured to target an instance of a "),t("code",[e._v("ShadowJar")]),e._v(" task and run immediately before it.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("ConfigureShadowRelocation")]),e._v(" task, scans the dependencies from the configurations specified on the associated\n"),t("code",[e._v("ShadowJar")]),e._v(" task and collects the package names contained within them. It then configures relocation for these\npackages using the specified "),t("code",[e._v("prefix")]),e._v(" on the associated "),t("code",[e._v("ShadowJar")]),e._v(" task.")]),e._v(" "),t("p",[e._v("While this is useful for developing Gradle plugins, nothing about the "),t("code",[e._v("ConfigureShadowRelocation")]),e._v(" task is tied to\nGradle projects. It can be used for standard Java or Groovy projects.")]),e._v(" "),t("p",[e._v("A simple Gradle plugin can use this feature by applying the "),t("code",[e._v("plugin-shadow")]),e._v(" plugin and configuring the dependencies\nlike so:")]),e._v(" "),t("div",{staticClass:"language-groovy no-plugins extra-class"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[e._v("plugins "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  id "),t("span",{attrs:{class:"token string"}},[e._v("'com.github.johnrengelman.plugin-shadow'")]),e._v(" version "),t("span",{attrs:{class:"token string"}},[e._v("'4.0.2'")]),e._v("\n  id "),t("span",{attrs:{class:"token string"}},[e._v("'java'")]),e._v("\n"),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\ndependencies "),t("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    shadow "),t("span",{attrs:{class:"token function"}},[e._v("localGroovy")]),t("span",{attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    shadow "),t("span",{attrs:{class:"token function"}},[e._v("gradleApi")]),t("span",{attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n    compile "),t("span",{attrs:{class:"token string"}},[e._v("'org.jdom:jdom2:2.0.6'")]),e._v("\n    compile "),t("span",{attrs:{class:"token string"}},[e._v("'org.ow2.asm:asm:6.0'")]),e._v("\n    compile "),t("span",{attrs:{class:"token string"}},[e._v("'org.ow2.asm:asm-commons:6.0'")]),e._v("\n    compile "),t("span",{attrs:{class:"token string"}},[e._v("'commons-io:commons-io:2.4'")]),e._v("\n    compile "),t("span",{attrs:{class:"token string"}},[e._v("'org.apache.ant:ant:1.9.4'")]),e._v("\n    compile "),t("span",{attrs:{class:"token string"}},[e._v("'org.codehaus.plexus:plexus-utils:2.0.6'")]),e._v("\n"),t("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("Note that the "),t("code",[e._v("localGroovy()")]),e._v(" and "),t("code",[e._v("gradleApi()")]),e._v(" dependencies are added to the "),t("code",[e._v("shadow")]),e._v(" configuration instead of the\nnormal "),t("code",[e._v("compile")]),e._v(" configuration. These 2 dependencies are provided by Gradle to compile your project but are ultimately\nprovided by the Gradle runtime when executing the plugin. Thus, it is "),t("strong",[e._v("not")]),e._v(" advisable to bundle these dependencies\nwith your plugin.")])])}],!1,null,null,null);s.options.__file="README.md";n.default=s.exports}}]);